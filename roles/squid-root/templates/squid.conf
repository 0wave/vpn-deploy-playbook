{% if bind_ip is defined %}
http_port {{ bind_ip }}:{{ listen_port }} name=default
{% else %}
http_port {{ listen_port }} name=default
{% endif %}

cache_dir ufs /var/spool/squid3 1024 16 256

{% if squid_require_auth %}
auth_param basic program /usr/lib/squid3/basic_ncsa_auth  {{ squid_passwd_file }}
acl require_auth proxy_auth REQUIRED
http_access deny !require_auth
http_access allow require_auth
http_access deny all
{% else %}
http_access allow all
{% endif %}

forwarded_for off
via off
header_access X-Cache-Lookup deny all
header_access X-Squid-Error deny all
header_access X-Cache deny all

#http_access allow manager localhost
#http_access deny manager
#http_access allow localhost
